<div class="sidenav" id="menu-side">
  <div ng-if="(menu.context === 'project' || menu.context === 'activity')">
    
    <a class="project-home-link" ui-sref="p.detail({projectid: menu.project.code})" onclick="toggleSideNav();" title="Project Details">
      <span class="project-home-link__inner-container">
        <span class="project-home-link__project-name">{{project.name? project.name : 'Untitled Project'}}</span>
      </span>
    </a>

    <div class="sidenav-group">
      <ul class="nav nav-pills nav-stacked">
        <li ng-repeat="item in menu.projectTopMenu.items | orderBy: 'position'" ng-if="item.shouldRender(menu.authentication.user, menu.project);"
            ng-class="{ 'active': $state.includes(item.state) }" class="{{item.class}}">
            <a ui-sref="{{item.state}}" ng-bind="item.title" title="{{item.title}}"></a>
        </li>
      </ul>
      <ul class="nav nav-pills nav-stacked">
        <li ng-repeat="item in menu.projectMenu.items | orderBy: 'position'"
            ng-if="!menu.isNewProject && item.shouldRender(menu.authentication.user, menu.project);"
            ng-class="{ active: $state.includes(item.state) }" class="{{item.class}}">
            <a ui-sref="{{item.state}}" ui-sref-opts="{reload: true}" ng-bind="item.title" title="{{item.title}}"></a>
        </li>
      </ul>
    </div>

    <div class="sidenav-group" ng-if="menu.project.userCan.manageRoles || menu.project.userCan.managePermissions">
      <h4>Project Settings</h4>
      <ul class="nav nav-pills nav-stacked">
        <li ng-if="menu.project.userCan.manageRoles">
          <a href x-role-users-modal x-context="menu.project" title="Edit Project Roles">
            <span class="glyphicon glyphicon-cog"></span><span>Edit Roles</span>
          </a>
        </li>
        <li ng-if="menu.project.userCan.managePermissions">
          <a href x-role-permissions-modal x-context="menu.project" x-object="menu.project">
            <span class="glyphicon glyphicon-lock"></span><span>Edit Permissions</span>
          </a>
        </li>
      </ul>
    </div>

  </div>
</div>
